<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileStreamBot | {{file_name}}</title>
    <link rel="icon" href="https://i.ibb.co/Hh4kF2b/icon.png" type="image/x-icon">
    
    <!-- Include THEOplayer CSS -->
    <link rel="stylesheet" href="https://cdn.theoplayer.com/latest/theoplayer.css" />
</head>

<body>
    <div style="text-align: center; margin-top: 20px;">
        <h2>Now Playing: {{file_name}}</h2>
    </div>

    <div style="max-width: 100%; text-align: center; margin-top: 20px;">
        <!-- THEOplayer Video Player -->
        <div id="theoplayer" style="width: 100%; max-width: 100%; margin: 0 auto;"></div>
    </div>

    <div style="text-align: center; margin-top: 10px;">
        <h4>File Size: {{file_size}}</h4>
        <button onclick="copyStreamLink()">Copy Stream Link</button>
    </div>

    <!-- Include THEOplayer JS -->
    <script src="https://cdn.theoplayer.com/latest/theoplayer.js"></script>

    <script>
        // Initialize THEOplayer
        const player = new THEOplayer.Player('theoplayer', {
            libraryLocation: 'https://cdn.theoplayer.com/latest/',
            autoplay: true,
            controls: true,
            width: '100%',
            height: 'auto',
        });

        // Setup the video source
        player.source = {
            sources: [{
                src: "https://faststreaming.cybersyncc.workers.dev/?src={{file_url}}",
                type: "video/mp4"
            }]
        };

        // Function to copy stream link
        function copyStreamLink() {
            const link = "https://faststreaming.cybersyncc.workers.dev/?src={{file_url}}";
            navigator.clipboard.writeText(link).then(() => {
                alert("Stream link copied!");
            }).catch(err => {
                alert("Failed to copy link: " + err);
            });
        }
    </script>
</body>

</html>
